### Лекция 7. Ассоциативные контейнеры
Контейнеры stl делятся на 
- последовательные. Поддерживается пользовательский порядок элементов.
- ассоциативные. Либо порядок элементов определяется смыслом контейнера, либо этого порядка нет вовсе.

### псевдонимы типов ассоциативных контейнеров
- C::key_type - тип ключа
- C::key_compare - тип функтора для сравнения ключей
- C::value_compare - тип функтора для сравнения значений

### ассоциативные контейнеры под капотом
- как правило, на основе КЧ-дерева.
- Добавление и поиск имеют логарифмическую сложность.
- По умолчанию элементы упорядочены по возрастанию.

### особенности insert()
insert() может принимать итератор, перед которым будет вставка нового элемента. 

Если есть итератор - O(1)

Если insert() без итератора - O(n)

### особенности erase()
erase() может принимать значение типа key_type, который удаляет элементы с указанным ключом и вернет число удаленных элементов.

### упорядоченные ассоциативные контейнеры
В этих контейнерах есть внутренний порядок, чаще всего по возрастанию элементов.
- set
- map
- multiset
- multimap

### std::set
- реализует АТД "множество", хранит только ключи. key_type и value_type совпадают.
- ключи уникальны
- есть двунаправленные итераторы.

### std::map
- реализует АТД "словарь".
- ключи уникальны.
- value_type представляет собой std::pair<const Key, T>
- есть двунаправленные итераторы
- есть оператор []. Если ключа нет, будет создан элемент с конструктором по умолчанию. Лучше использовать метод at()

```c++
std::map<std::string, std::string> fruits;


fruits.insert({"banana", "yellow"});
fruits["avocado"] = "green";

std::cout << "Banana is " << fruits["banana"] << "\n";

std::cout << "Banana is " << fruits["banana"] << '\n';
std::cout << "Pineapple is " << fruits["pineapple"] << '\n';
// Banana is yellow
// Pineapple is

for (const auto &i : fruits) {
    std::cout << i.first << ": " << i.second << '\n';
}
// avocado: green
// banana: yellow
// pineapple:
```

### std::multiset
- отличается от set, что ключи повторяются. 

### std::multimap
- отличается от map, что ключи повторяются.
- нет итератора индексации [] и метода at()

### неупорядоченные ассоциативные контейнеры
- сделаны на базе хеш-таблиц
- добавление и поиск обычно за О(1) с поправкой на коллизии.
- тип key_type должен поддерживать операцию вычисления хеша
- по умолчанию для сравнения юзают оператор == и функтор std::equal_to
- однонаправленные итераторы

### Хеш
Хеш - результат работы хеш-функции

Хеш-функция - осуществляет преобразование данных произвольной длины в результат фиксированной длины. Необратима и неслучайна. Хорошая хеш-функция равномерно распределяет хеш и минимизирует коллизии.

Коллизия - совпадения хеша для разных данных

Неупорядоченные ассоциативные контейнеры по умолчанию юзают функтор std::hash

### примеры неупорядоченных ассоциативных контейнеров
- std::unordered_map
- std::unordered_set
- std::unordered_multimap
- std::unordered_multiset

